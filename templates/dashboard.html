{% extends "base.html" %}
{% block page_title %}{{ page_title if page_title else "Dashboard" }}{% endblock %}

{% block header %}
    <!-- Chart.js (used in iframe chart) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.2/chart.min.js"
            integrity="sha512-tMabqarPtykgDtdtSqCL3uLVM0gS1ZkUAVhRFu1vSEFgvB73niFQWJuvviDyBGBH22Lcau4rHB5p2K2T0Xvr6Q=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h3 class="mb-4">Dashboard</h3>

        <!-- Visited documents list (from results page clicks) -->
        {% if visited_docs %}
            <div class="mb-5">
                <h5>Visited Documents</h5>
                <ul class="list-group">
                    {% for doc in visited_docs %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ doc.doc_id }}
                            <span class="badge bg-primary rounded-pill">{{ doc.counter }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        <!-- Full Altair analytics dashboard -->
        {% if dashboard_html %}
            <div class="mb-5">
                <h5>Analytics Dashboard</h5>
                {{ dashboard_html | safe }}
            </div>
        {% endif %}
    </div>
{% endblock %}
